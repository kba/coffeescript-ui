@import url($font_awesome_url);

$padding: 10px;
$compensating-padding: 7px;
$gap: 12px;
$border-radius: 4px;
$highlight-color: hsl(217,97%,57%);
$on-highlight-color: white;
$pane-header-height: 30px;

@mixin margin($factor: 1) {
	margin-bottom: $padding * $factor;
	
	&:last-child {
		margin-bottom: 0;
	}
}

@mixin padding($factor: 1) {
	padding: $padding * $factor;
}

@mixin padding-y($factor: 1) {
	padding-top: $padding * $factor;
	padding-bottom: $padding * $factor;
}

@mixin button-reset() {
	&,
	&:active,
	&.cui-active,
	&:active.cui-disabled {
		background: none;
		border: none;
		box-shadow: none;
		color: inherit;
		border-radius: 0;
	}
}

// Flex for selected TABLE
@mixin flex-table() {
	display: flex; // yes, this is fun :)
	box-sizing: border-box;
	flex: 0 0 auto;
	flex-direction: column;

	> tr {
		display: flex; // yes, this is fun :)
		box-sizing: border-box;
		flex: 1 1 auto;
		flex-direction: row;

		> td {
			display: flex; // yes, this is fun :)
			box-sizing: border-box;
			flex: 0 0 auto;
			flex-direction: column;
			align-items: stretch;
		}
	}
}


// reset

table {
	border-collapse: collapse;
}

td {
	vertical-align: top;
	padding: 0;
	margin: 0;
}

ul {
	margin: 0;
	padding-left: 3px;
  list-style-position: inside;
	list-position: inline;
}

a {
	text-decoration: none;
	color: black;
}
// basics

html {
	overflow: hidden;
  width: 100%;
  height: 100%;
}

label {
	box-sizing: border-box;
}

body {
	font-family: -apple-system, ".SFNSText-Regular", "San Francisco", "Roboto", "Segoe UI", "Helvetica Neue", "Lucida Grande", sans-serif;
	font-size: 13px;
	line-height: normal;
	background: hsl(0,0%,93%);
	display: flex;
	width: 100%;
  height: 100%;
  padding: 0;
  margin: 0;
}

input,
textarea {
	display: flex;
	font-size: 12px;
	border: 1px solid hsl(0,0%,75%);
	font-family: inherit;
	padding: 2px 3px;
	flex: 1 1 auto;
	box-sizing: border-box;
	resize: vertical;
	box-shadow: 0 1px rgba(0,0,0,.05) inset;
}

input {
	overflow: hidden;
}

div, a {
	display: flex;
	flex: 0 0 auto;
	align-items: stretch;
	box-sizing: border-box;
	flex-direction: column;
}

li > div {
	display: inline-flex;
}

table.cui-form-table {
	@include flex-table()
}



// HorizontalLayout
.cui-horizontal-layout {
	&.cui-maximize-horizontal {
		flex-direction: row;
		// overflow: hidden; cuts off outline in date-time picker: year picker

		> .cui-horizontal-layout-left,
		> .cui-horizontal-layout-right
		{
			position: relative;
			// overflow: hidden; cuts off outline in date-time picker: year picker
			// max-width: 45%; breaks CUI.confirm
		}
		> .cui-horizontal-layout-center {
			position: relative;
			flex: 1 1 auto;
			overflow: auto;
		}
	}

	&.cui-maximize-vertical {
		flex: 1 1 auto;
	}

	&:not(.cui-maximize-horizontal) {
		flex-direction: row;
		align-self: flex-start;
	}
}


// VerticalLayout
.cui-vertical-layout {
	&.cui-maximize-vertical {
		flex: 1 1 auto;
		// overflow: hidden; // cuts off password input outline

		> .cui-vertical-layout-top,
		> .cui-vertical-layout-bottom {
			position: relative;
			overflow: hidden;
		}
		> .cui-vertical-layout-center {
			position: relative;
			flex: 1 1 auto;
			// overflow: auto; // cuts off password input outline
		}
	}

	&.cui-maximize-horizontal {
		// overflow: hidden; // cuts off password input outline
	}

	&:not(.cui-maximize-horizontal) {
		align-self: flex-start;
	}
}

.cui-horizontal-list {
	> .cui-horizontal-layout-center {
		flex-direction: row;
	}
}


// Layout Absolute Horizontal
.cui-horizontal-layout{
    &.cui-absolute {
        position: relative;

        width: 100%;
        height: 100%;

        & > div {
			position: absolute !important; // overwrite "relative" from above
            top: 0;
            bottom: 0;
			// height: 100%;
        }
        & > .cui-horizontal-layout-left {
            left: 0;
        }
        & > .cui-horizontal-layout-center {
            left: 0;  // overwritten by Layout.coffee
            right: 0;  // overwritten by Layout.coffee
        }

        & > .cui-horizontal-layout-right {
            right: 0;
        }
    }
}





// Layout Absolute Vertical
.cui-vertical-layout {
	&.cui-absolute {
		position: relative;

		width: 100%;
		height: 100%;

		& > div {
			position: absolute !important; // overwrite "relative" from above
			left: 0;
			right: 0;
			width: 100%;
		}

		& > .cui-vertical-layout-top {
			top: 0;
		}

		& > .cui-vertical-layout-center {
			top: 0; // overwritten by Layout.coffee
			bottom: 0; // overwritten by Layout.coffee
		}

		& > .cui-vertical-layout-bottom {
			bottom: 0;
		}

	}
}


// Flexhandle

.cui-flex-handle-hidden {
	display: none;
}

.cui-flex-handle {
	&.cui-flex-handle-has-label:not(.cui-flex-handle-closed) {
		.cui-label {
			display: none;
		}
	}
}

.cui-flex-handle-row {
	width: 20px;
	margin: 0 -10px;
	flex: 0 0 auto;
	overflow: hidden;
	position: relative;
	z-index: 1;
	&:after {
		content: "";
		position: absolute;
		left: 10px;
		height: 100%;
		top: 0;
		width: 1px;
		background: linear-gradient(hsl(0,0%,83%), hsl(0,0%,87%));
	}
	&:not(.cui-flex-handle-closed) {
		cursor: ew-resize;
	}
	&.cui-flex-handle-closed {
		cursor: pointer;
	}
	&.cui-flex-handle-manual-size {
		// background-color: #64fdd8;
	}
	&.cui-flex-handle-has-label.cui-flex-handle-closed {
		width: 20px;
		.cui-label.cui-tmpl-label-rotate-90 {
			.cui-label-transform {
				// the difference to the normal rotate-90 is that
				// we want to touch the label the "top" and not
				// start from the "bottom"
				transform: rotateZ(-90deg) translateY(-3px) translate(calc(-100% - 3px));
				transform-origin: left top;
			}
		}
	}
}

.cui-flex-handle-column {
	&.cui-flex-handle-has-label.cui-flex-handle-closed {
		height: 20px;
	}

	&.cui-flex-handle-manual-size {
		background-color: #64fdd8;
	}

	height: 6px;
	flex: 0 0 auto;
	overflow: hidden;
	border-top: 1px solid black;
	border-bottom: 1px solid black;
	background-color: #64b6fd;
	&:not(.cui-flex-handle-closed) {
		cursor: ns-resize;
	}
	&.cui-flex-handle-closed {
		cursor: pointer;
	}
}


.cui-flex-handle-stretched {
	flex: 1 1 auto !important;
}

.cui-flex-handle-hide-for-stretch {
	display: none;
}


.cui-tmpl-pane-fill-screen {
    transition: top ease-out 0.5s,right ease-out 0.5s,left ease-out 0.5s,bottom ease-out 0.5s;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;

		// Pane Fillscreen
		.cui-pane-fill-screen {
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background-color: #ffffff;
			.cui-pane-fill-screen-inner {
				width: 100%;
				height: 100%;
			}
		}
		// overwrite "style" set by code
        &.cui-pane-fill-screen-is-on {
            top: 0 !important;
            left: 0 !important;
            bottom: 0 !important;
            right: 0 !important;
        }
}

// BorderLayout

.cui-border-layout-north,
.cui-border-layout-south {
	background-color: #ffd890;
}

.cui-border-layout-west,
.cui-border-layout-east {
	background-color: #ffefd1;
}

// Toolbar
.cui-toolbar {
	padding: $padding;
	
	> div {
		&.cui-horizontal-layout-left,
		&.cui-horizontal-layout-right {
			flex-direction: row;
		}

		&.cui-horizontal-layout-center {
			align-items: center;
		}
		// flex-direction: row;
		// align-items: center;
		> .cui-maximize-horizontal {
			// in column direction this is solved by
			// align-items: stretch, but here
			// we need to overwrite this
			flex: 1 1 auto;
		}
		> .cui-toolbar {
			// nested toolbars do not get a padding
			padding: 0;
		}
	}
	&.cui-template-empty {
		display: none;
	}
}

// Pane
.cui-pane-header {
	.cui-buttonbar {
		margin-bottom: 0;
	}
}

.cui-data-table {
	.cui-pane-footer {
		background: hsl(0,0%,98%);
		padding: 0;
		border-top: 1px solid hsl(0,0%,71%);
		
		.cui-button {
			@include button-reset;
			padding: 0 2px;
			height: 19px;
			border-right: 1px solid hsl(0,0%,71%) !important;
			
			&:before {
				display: none;
			}
			
			&:active {
				color: inherit;
				background: hsl(0,0%,75%);
			}
		}

		.cui-buttonbar .cui-button {
			margin: 0;
		}
	}
}

// Icons
i.fa-spinner {
	width: 12px;
}

i.cui-spin-stepped {
	-webkit-animation: fa-spin 1s steps(8) infinite;
	   -moz-animation: fa-spin 1s steps(8) infinite;
	    -ms-animation: fa-spin 1s steps(8) infinite;
	     -o-animation: fa-spin 1s steps(8) infinite;
	        animation: fa-spin 1s steps(8) infinite;
}

// Button / Select

@mixin button-style() {
	color: inherit;
	background: white;
	border: 1px solid hsl(0,0%,73%);
	border-bottom-color: hsl(0,0%,65%);
	border-top-color: hsl(0,0%,76%);
	box-shadow: 0 1px rgba(0,0,0,.05);
}

@mixin button-active-style() {
	color: white;
	background: linear-gradient(hsl(240,3%,70%), hsl(240,2%,58%));
	border-color: hsl(240,3%,59%);
	border-top-color: hsl(240,3%,66%);
	border-bottom-color: hsl(240,2%,51%);
}

@mixin button-simple-active() {
	color: inherit;
	background: hsl(106,0%,94%);
	border-color: hsl(0,0%,73%);
	border-bottom-color: hsl(0,0%,65%);
	border-top-color: hsl(0,0%,76%);
}

.cui-button {
	cursor: pointer;
	display: inline-flex; // if a button is not in a flex container, behave like "inline-block"
	white-space: nowrap;
	flex-direction: row;
	flex: 0 0 auto;
	align-self: flex-start;
	height: 21px;
	line-height: 19px;
	@include button-style();
	
	&:active {
		color: white;
		background: linear-gradient(hsl(238,2%,58%), hsl(238,3%,35%));
		border-color: hsl(238,5%,34%);
		border-bottom-color: hsl(238,5%,26%);
		border-top-color: hsl(238,5%,37%);
		
		&.cui-disabled {
			@include button-style();
		}
	}

	&.cui-disabled {
		box-shadow: none;
		opacity: 0.5;
		cursor: default;
	}

	&.cui-active,
	&.cui-active.cui-disabled {
		@include button-active-style();
	}

	&.cui-button-appearance-flat {
		&,
		&:active,
		&.cui-active {
			color: unset;
			background: none;
			border: none;
			box-shadow: none;
		}

		.cui-button-left,
		.cui-button-right {
			color: hsl(0,0%,30%);
		}
	}

	// add padding around the whole button
	border-radius: $border-radius;
}

.cui-button-size-mini {
	font-size: 12px;
}

.cui-button-left {
	&:empty {
		display: none;
	}
}

.cui-button-left,
.cui-button-right {
	text-align: center;
	flex: 0 0 auto;
	justify-content: center;
}

.cui-button-left {
	padding-left: 10px;
	padding-right: 5px;

	&:empty + .cui-button-center {
		padding-left: 12px;
	}
}

.cui-button-center {
	flex: 1 1 auto;
	
	&:first-child {
		padding-left: 12px;
	}

	&:last-child {
		padding-right: 12px;
	}
	
	&:only-child {
		padding-left: 12px;
		padding-right: 12px;
	}

	&:empty {
		padding: 0;
		width: 5px;
	}
}

.cui-button-right {
	padding: 0 5px;
	
	&:empty {
		padding: 0;
		width: 9px;
	}
}

.cui-button-select {
	flex-direction: row;
}

a[role="button"].cui-button-appearance-link {
	height: initial;
	> .cui-button-center {
		word-break: break-all;
	}
}


.cui-button-appearance-link[role] {
	background-color: transparent;
	border-style: none;
}

.cui-button-appearance-important[role] {
	background-color: #ff8800;
	border: 1px solid red;
}

// Href Button e.g. Link
.cui-button-href {
	color: $highlight-color;
	display: inline-flex;
	flex-direction: row;
}

.tab-header-button {
	&.cui-active {		
		& + .tab-header-button:before,
		&:before {
			display: none;
		}
	}
}


// Buttonbar
.cui-buttonbar-group {
	> .cui-button {
		position: relative;
		
		&:active:not(.cui-active) {
			@include button-simple-active;
		}
			
		&:not(:last-child) {
			border-right-width: 0;
		}
		
		&:not(:first-child) {
			border-left-width: 0;
		}

		&:first-child {
			border-top-right-radius: 0;
			border-bottom-right-radius: 0;
			
			&:before {
				display: none;
			}
		}

		&:last-child {
			border-top-left-radius: 0;
			border-bottom-left-radius: 0;
		}

		&:not(:first-child):not(:last-child) {
			border-radius: 0;
		}

		&:before {
			content: "";
			position: absolute;
			left: 0;
			top: 0;
			height: 100%;
			background: rgba(0,0,0,.1);
			width: 1px;
		}
	}

	> .cui-data-field {
		& + *:before {
			display: none;
		}
	}
}


// Checkbox
.cui-checkbox {
	padding: 0 4px;
}

.cui-button-checkbox {
	flex-direction: row;
	
	@include button-reset;
	
	&.cui-active {
		.cui-button-left i {
			position: relative;
			background: hsl(240,2%,61%);
			border-color: hsl(240,3%,58%);
			color: white;
			text-shadow: 0 1px rgba(0,0,0,.2);
		}

		&[role="radio"] {
			.cui-button-left i {
				color: transparent;
				text-shadow: none;
				
				// use radial gradient instead of border-radius
				// for a nice round form (otherwise its more of an egg)
				border-radius: none;
				border-color: transparent;
				background: radial-gradient(hsl(240,2%,61%), hsl(240,3%,58%));
				
				&:after { // radio dot
					content: "";
					position: absolute;
					left: 50%;
					top: 50%;
					width: 6px;
					height: 6px;
					margin: -3px 0 0 -3px;
					border-radius: 100%;
					background: white;
					box-shadow: 0 1px rgba(0,0,0,.2);
				}
			}
		}
	}
	
	.cui-button-left {
		padding-left: 0;
		padding-right: 4px;
		// empty checkbox: span
		// filled checkbox: i
		span,
		i {
			display: inline-block;
			width: 12px;
			height: 12px;
			border: 1px solid hsl(0,0%,72%);
			border-top-color: hsl(0,0%,65%);
			border-bottom-color: hsl(0,0%,72%);
			background: white;
			font-size: 11px;
			line-height: 13px;
			border-radius: 2px;
			box-shadow: 0 1px rgba(0,0,0,.05) inset;
		}
	}

	&[role="radio"] {
		.cui-button-left {
			span,
			i {
				width: 14px;
				height: 14px;
				border-radius: 100%;
			}
		}
	}
}

// Select

.cui-select {
	.cui-button-center:empty {
		display: flex;
		
		&:after {
			content: '-';
			padding: 0 $padding/4;
		}
	}

	&[max-chars="2"] .cui-button-center span {
		width: 2.5ch;
	}

	&[max-chars="4"] .cui-button-center span {
		width: 4ch;
	}
}

// Panel
.cui-panel-header {
	background-color: #e6e6e6;
}

.cui-panel-body {
	background-color: #f3f3f3;
}

.cui-button[role="button"].cui-panel-header-button {
	border: none;
	background-color: transparent;
	.cui-button-left {
		width: 15px;
	}
}
.cui-panel-closed > .cui-panel-body {
	display: none;
}


// Label

.cui-label {
	line-height: 20px;
	display: inline-flex;
	flex-direction: row;
	flex: 0 0 auto;
	align-items: stretch;
	// align-self: flex-start;
	
	&.cui-tmpl-label-rotate-90 {
		// rotate by 90 degrees
		white-space: nowrap;
		// align-self: flex-start;
		> .cui-label-transform {
			// the transform-origin is the corner
			// of the content, so the padding
			// moved the origin to the right.
			// we need to compensate for that
			transform: rotateZ(-90deg) translateY(calc(100% - 3px)) translateX(3px);
			transform-origin: left bottom;
		}
	}
	> .cui-label-icon {
		flex: 0 0 auto;
		width: 20px;
		text-align: center;
		> i {
			font-size: 16px;
			line-height: 20px;
		}
	}

	> .cui-label-icon:not(:empty) + .cui-label-content:not(:empty) {
		padding-left: 3px;
	}

	&:not(cui-label-multiline) {
		> .cui-label-content {
			flex-direction: row;
		}
	}

	> .cui-label-content {
		// display: inline-flex;
		flex: 0 0 auto;
	}

	// Markdown

	&.cui-label-markdown .cui-label-content {
		display: block;
		
		h1, h2, h3, h4, h5, h6 {
		  font-weight: normal;
		  margin: 0;
		}

		h1 {
		  font-size: 24px;
		  line-height: 30px;
		}

		h2 {
		  font-size: 20px;
		  line-height: 25px;
		}
		
		p,
	  pre,
	  blockquote {
	    margin: 0 0 16px;
	  }

	  & > p,
	  & > pre,
	  & > blockquote {	  	
	    &:first-child {
	      margin-top: 6px;
	    }

	    &:last-child {
	      margin-bottom: 6px;
	    }
	  }

	  blockquote {
	    padding: 8px 12px;
	    border-left: 5px solid #eee;
	  }

	  code {
	    border: none;
	    background: hsl(0,0%,97%);
	    white-space: pre-wrap;
	  }

	  pre {
	    padding: 12px 15px;
	    font-size: 13px;
	    line-height: 1.45;
	    background: hsl(0,0%,97%);
	    white-space: pre-wrap;
	    border-radius: 3px;
	    border: none;
	    overflow: auto;
	  }

	  hr {
	    margin-top: 6px;
	    margin-bottom: 6px;
	    border: 0;
	    border-top: 1px solid #dfdfdf;
	  }
	}


	&.cui-label-multiline {
		align-self: stretch;
		@includ margin();

		&:not(.cui-label-markdown) {
			white-space: pre-wrap;
			// word-break: normal;
			word-break: break-all;
			// this does not work in IE, but will
			// be ignored by IE, so we are good
			word-break: break-word;
		}

		> .cui-label-content {
			flex: 0 1 auto;
		}

		&.cui-label-manage-overflow {
			> .cui-label-content {
				transition: height ease 0.5s, max-height ease 0.5s;
				max-height: 62px;
				position: relative;
				// flex-direction: column;
				overflow: hidden;

				> .cui-label-manage-overflow-content-container {
					transition: height ease 0.5s, max-height ease 0.5s;
					overflow: hidden;

					> span {
						white-space: pre-wrap;
						word-break: normal;
					}
				}

				> .cui-label-manage-overflow-button-container {
					height: 0;
					align-self: flex-end;
					.cui-button {
						transform: translateY(-100%);
						border-style: none;
						background-color: #8a8a8a;
						color: #ffffff;
						border-radius: 3px;
					}
				}
			}

		}
	}
	.cui-label-content:empty {
		display: none;
	}
	.cui-label-icon:empty {
		display: none;
	}
}

// Buttonbar
.cui-buttonbar {
	flex-direction: row;
	@include margin();
	
	> *:not(:last-child) {
		margin-right: $gap;
	}
}

// hacky for demo-tabs-menu
.cui-demo-pane-center > * > .cui-vertical-layout-top.cui-layout-cell {
	margin-bottom: -20px;
	z-index: 1;
}

// Buttonbar & Button
.cui-buttonbar + .cui-button {
	margin-left: 4px;
}

.cui-button + .cui-buttonbar {
	margin-left: 4px;
}

.cui-buttonbar-group {
	// display: inline-flex;
	flex-direction: row;
}

// Checkbox
.cui-checkbox {
	flex-direction: column;
	
	.cui-button {
		height: 20px;
		line-height: 20px;
		white-space: initial;
	}
}

// Input
.cui-input {
	// state classes:
	// cui-input-invalid
	// cui-input-has-no-user-input
	// cui-input-has-user-input
	// cui-has-focus
	// cui-has-check-input
	//
	// hint:
	// cui-input-has-invalid-hint
	// cui-input-has-valid-hint
	// cui-input-has-input-hin:
	//
	position: relative;
		
	&:after { // outline
		content: "";
		position: absolute;
		left: -3px;
		top: -3px;
		right: -3px;
		bottom: -3px;
		pointer-events: none;
		border: 4px solid rgba(0,0,0,.15);
		border-radius: 3px;
		transform: scale(1.2);
		opacity: 0;
		transition: none;
		z-index: 1;
	}

	&.cui-input-has-check-input {
		&.cui-input-invalid.cui-input-has-user-input {
			input {
				border-color: red;
				background: rgba(255, 131, 122, 0.28);
			}
		}

		&.cui-input-has-valid-hint.cui-input-has-user-input:not(.cui-input-invalid) {
			input {
				border-color: green;
				background: rgba(131, 255, 122, 0.28);
			}
		}
	}

	&.cui-input-has-no-user-input.cui-input-required {
		input {
			border-color: rgb(255, 117, 215);
			background: rgba(255, 117, 215, 0.28);
		}
	}

	input {
		height: 20px;
	}

	input,
	textarea {
		outline: none;
	}

	&.cui-has-focus:after {
		opacity: 1;
		transform: none;
		transition: 200ms ease-out;
	}
}

::-ms-clear {
    display: none;
}

.cui-input-shadow {
	position: absolute;
	display: block;
	padding: 0;
	border: none;
	top: -1000px;
	left: -1000px;
}

// Layer

.cui-tmpl-layer-root {
	z-index: 1;
}

.cui-layer {
	position: absolute;
	flex-direction: column;
	overflow: auto;
	margin: 10px;
	outline: none;
	background: hsl(0,0%,93%);
	border-radius: 6px;
	box-shadow:
		0 0 0 1px rgba(0,0,0,.06),
		0 1px 10px rgba(0,0,0,.43);
		
	> .cui-layout > .cui-vertical-layout-center {
		padding: $compensating-padding $padding;
		
		> .cui-multiline-label {
			padding: $compensating-padding $padding;
		}

		.cui-table {
			margin: $compensating-padding/2 $padding;
		}
	}
		
	.cui-pane-footer {
		padding: $padding $padding*2 $padding*2;
	}
}

.cui-confirmation-dialog,
.cui-layer-root-modal {
	.cui-pane-header {
		background: linear-gradient(hsl(0,0%,93%),hsl(0,0%,84%));
		border-bottom: 1px solid hsl(300,1%,70%);
		box-shadow: 0 1px hsl(300,5%,96%) inset;
		border-radius: 6px 6px 0 0;
		padding: 0;
		height: $pane-header-height;
		
		.cui-label {
			padding-left: $padding*2;
			line-height: $pane-header-height;
		}
		
		.cui-button {
			align-self: stretch;
			height: auto;
			padding: 0 8px;
		}
	}
}

.cui-layer-pointer {
	position: absolute;
	z-index: 1;
	width: 33px;
  height: 16px;
	overflow: hidden;
	
	&:after { // arrow (north)
		content: "";
		position: absolute;
		left: 8px;
    top: 7px;
    width: 18px;
    height: 18px;
		background: white;
		box-shadow: 
			0 0 0 1px rgba(0,0,0,.06),
			0 1px 10px rgba(0,0,0,.43);
		transform: rotate(45deg);
	}
}

.cui-layer-pointer--s:after {
	top: -9px;
}

.cui-layer-pointer--e,
.cui-layer-pointer--w {
	width: 16px;
	height: 33px;
}

.cui-layer-pointer--e:after {
	left: -9px;
}

.cui-layer-backdrop {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	
	> div {
		flex: 1 1 auto;
		background-size: cover;
		background-repeat: no-repeat;
	}
}

.cui-layer-backdrop-body-clone {
	position: absolute;
	overflow: hidden;

	> *:first-child {
		position: absolute;
	}
}

.cui-tmpl-layer-root.cui-layer-root-backdrop-blur {
	> .cui-tmpl-layer-backdrop
	{
		-webkit-filter: blur(5px);
		-moz-filter: blur(5px);
		-ms-filter: blur(5px);
		filter: blur(5px);
		overflow: hidden;
	}

	> .cui-layer {
		// blur effect, make layer transparent
		background-color: rgba(255, 255, 255, 0.39);

		.cui-tmpl-item-list-body {
			.cui-button {
				background-color: transparent;
			}
		}
	}
}

// Tooltip
.cui-layer-root-tooltip .cui-layer-pointer {
	width: $padding / 2;
	height: $padding / 2;

	&:after {
		display: none;
	}
}

.cui-tooltip {
	background: hsl(0,0%,94%);
	max-width: 260px;
	max-height: 100px;
	overflow: auto;
	border-radius: 2px;
	box-shadow:
		0 0 0 1px rgba(0,0,0,.06),
		0 1px 10px rgba(0,0,0,.43);
	cursor: default;
	
	.cui-label {
		font-size: 11px;
    line-height: 14px;
    padding: 3px 6px;
	}

	> .cui-layout > .cui-vertical-layout-center {
		padding: 0;
	}
}



// ConfirmationDialog
.cui-confirmation-dialog .cui-layer {
	width: 347px;
}

// Toast
.cui-layer-root-toast .cui-layer {
	color: white;
	background: rgba(0,0,0,.75);
	font-size: 16px;
	width: auto;

	> .cui-layout > .cui-vertical-layout-center {
		padding: 0 $padding;
	}
}

// Menu
.cui-menu {
	background: hsl(0,0%,96%);
	box-shadow:
		0 0 0 1px rgba(0,0,0,.06),
		0 1px 10px rgba(0,0,0,.43);
	border-radius: 4px;
	padding: $border-radius 0;
	
	.cui-item-list {
		font-size: inherit;
	}
}

.cui-menu-item {
	height: 20px;
	line-height: 20px;
}

.cui-menu-divider {
	margin: 6px 0;
}

// ItemList
.cui-item-list {
	font-size: 11px;

	.cui-label {
		cursor: default;
		margin: 1px $padding;
		font-weight: bold;
	}

	.cui-button {
		@include button-reset;
		
	  line-height: 19px;
	  padding: 0 $padding;

		&:hover:not(.cui-disabled),
		&:active,
		&.cui-active {
			color: white;
			background: hsl(0,0%,68%);
		}

		.cui-button-center {
			padding: 0;
		}
	}	
}

.cui-item-list-divider {
	height: 2px;
	background: hsl(0,0%,90%);
}

.cui-tmpl-item-list-body {
	flex-direction: column;

	> div {
		flex: 0 0 auto;
	}

	a[role="button"],.cui-button
	{
		align-self: stretch;
	}

	&.cui-item-list-has-button-left {
		// this button always has a left side
		.cui-file-upload-button {
			> .cui-button-left {
				display: flex;
				width: 20px;
			}
			> .cui-button-center:not(:empty) {
				padding-left: 3px;
			}
		}
		> .cui-tmpl-button-center,
		> .cui-tmpl-button-center-right {
			.cui-button-center {
				padding-left: 23px;
			}
		}
	}

	.cui-button-left {
		width: 20px;
	}
}

// Popover
.cui-popover {
	background: white;
	min-width: 247px;
}

// Popover: hide header
.cui-popover > .cui-layout > .cui-vertical-layout-top {
	display: none;
}

// Backdrop
.cui-layer-root-modal,
.cui-layer-root-alert,
.cui-layer-root-confirm,
.cui-layer-root-prompt {
	.cui-layer-backdrop {
		background: radial-gradient(rgba(0,0,0,.2), rgba(0,0,0,.3));
	}
}

// Modal
.cui-layer-root-modal .cui-layer {
	width: 417px;
}

// WaitBlock
.cui-tmpl-wait-block {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	.cui-wait-block-glass {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background-color: #000000;
		opacity: 0.3;
	}
	.cui-wait-block-inner {
		flex: 1 1 auto;
		.cui-wait-block-header {
			flex: 1 1 auto;
			justify-content: center;
			align-self: center;
			.cui-label > .cui-label-icon > i {
				font-size: 24px;
				color: #000000;
			}

		}
		.cui-wait-block-content {
			display: none;
		}
	}
}

// Tabs
.cui-tabs {
	.cui-tab {
		padding-top: $padding*2;
	}
	.cui-tabs-active-marker {
		display: none;
		position: absolute;
		bottom: 0;
		// left + width are set by javascript
		height: 3px;
		background: yellow;
		transition: width 0.3s ease, left 0.3s ease;
	}
	> .cui-vertical-layout-top {
		> .cui-pane-header {
			.cui-horizontal-layout-center {
				overflow: hidden;
			}
		}
	}
	> .cui-vertical-layout-center {
		> .cui-tmpl-tabs-bodies {
			flex: 1 1 auto;
			flex-direction: row;
			overflow: hidden;
			> .cui-tmpl-tab-body {
				// disable the javascript overwrite here
				margin-left: 0 !important;
				// transition: margin-left 0.5s ease;
				background: hsl(0,0%,89%);
				border: 1px solid hsl(106,0%,87%);
				border-top-color: hsl(106,0%,83%);
				border-radius: 3px;
				flex: 1 1 auto;
				overflow: auto;
				&.cui-tab-hidden {
					display: none;
				}
			}
		}
	}
}



// ListView
.cui-list-view {
	background: white;
	font-size: 11px;
	border: 1px solid hsl(0,0%,77%);
	
	[cui-lv-quadrant="0"],
	[cui-lv-quadrant="1"] {
		color: hsl(0,0%,30%);
	}

	.cui-label {
		padding: 0 $padding;
	}
}

.cui-list-view-grid-inner-top {
	border-bottom: 1px solid hsl(0,0%,84%);
}


.cui-list-view-grid-quadrant-0,
.cui-list-view-grid-quadrant-1 {
	.cui-lv-td {
		position: relative;
		
		&:after { // table-head line
			content: "";
			position: absolute;
			right: 0;
			top: 2px;
			bottom: 2px;
			width: 1px;
			background: hsl(0,0%,90%);
		}
	}
}

.cui-list-view-grid-quadrant-1 {
	.cui-lv-td:last-child:after {
		display: none;
	} 	
}

.cui-list-view-grid-has-fixed-rows {
}

// &.cui-maximize-vertical {
//	> .cui-vertical-layout-center {
//		> .cui-list-view-grid {
//			height: 100%;
//		}
//	}
// }

// &.cui-maximize-horizontal {
//	> .cui-vertical-layout-center {
//		> .cui-list-view-grid {
//			width: 100%;
//		}
//	}
// }

.cui-list-view-grid {
	flex: 1 1 auto;
	flex-direction: column;
	// needed for resize tool to position the resize
	// handles properly
	position: relative;
}

.cui-list-view-grid-inner-top {
	flex: 0 0 auto;
	flex-direction: row;
}

.cui-list-view-grid-inner-bottom {
	flex: 1 1 auto;
	flex-direction: row;
}

.cui-list-view-grid-quadrant-0 {
	flex: 0 0 auto;
	overflow: hidden;
}

.cui-list-view-grid-quadrant-1 {
	flex: 1 1 auto;
	overflow: hidden;
}

.cui-list-view-grid-quadrant-2 {
	flex: 0 0 auto;
	overflow: hidden;
}

.cui-list-view-grid-quadrant-3 {
	flex: 1 1 auto;
	overflow: auto;
}

.cui-list-view-grid-quadrant-2,
.cui-list-view-grid-quadrant-3 {
	.cui-lv-tr-outer:nth-child(even) {
		background: hsl(0,0%,96%);
	}
}

// outside .cui-list-liew, we can use
// this in Form too

.cui-lv-tbody {
	flex-direction: column;
}

.cui-lv-tr-outer {
	// avoid the text select cursor on list items
	cursor: default;
	flex-direction: row;
	flex: 0 0 auto;
	
	&.cui-list-view-row-selectable.cui-selected {
		background: $highlight-color !important;
		color: white;
	}
}

.cui-lv-tr {
	flex: 1 1 auto;
	flex-direction: row;
	// border-bottom: dotted 1px #c0c0c0;
}

.cui-list-view-grid-inner-top {
	.cui-lv-td {
		justify-content: flex-end;
	}
}

.cui-list-view-row-move-handle-column {
	&.cui-lv-td {
		width: 10px;
		flex-direction: row;
	}
}

.cui-list-view-grid-quadrant-1,
.cui-list-view-grid-quadrant-3 {
	.cui-lv-td:last-child {
		// border-right: solid 1px black;
	}
}

.cui-lv-td {
	&.cui-lv-td-rotate-90 {
		width: 25px;
		> .cui-tmpl-label-rotate-90 {
			word-break: break-all;
			height: 100px;
			> .cui-label-transform {
				width: 100px;
			}

		}
	}
	&:not(.cui-lv-td-fill) {
		padding: 1px;
	}
	&.cui-lv-td-fill {
		padding: 2px;
		&:not(:last-child) {
			// border-right-style: dotted;
		}
	}

	&[colspan] {
		background-color: #e7ffff;
	}

	// border-right: solid 1px black;

	// align-items: flex-start;
	flex: 0 0 auto;
	overflow: hidden;
	flex-direction: column;

	&:not(.cui-lv-td-fill) {
		min-height: 22px;
	}

	&.cui-lv-td-max {
		flex: 1 1 auto;
	}
}

.cui-lv-tr-fill-outer {
	flex: 1 1 auto;
	flex-direction: row;
	background: linear-gradient(hsl(0,0%,96%) 50%, white 50%);
	background-size: 100% 36px;

	> .cui-lv-tr {
		border-style: none;
	}

	.cui-lv-td.cui-lv-td-fill {
		padding: 0;
	}
}

// do this on top level, so its easier to overwrite
.cui-lv-td {
	width: 100px;
}

.cui-tmpl-list-view-tool-col-resize-marker {
	position: absolute;
	cursor: col-resize;
	// bigger grab area
	margin: 0 -4px;
	padding: 0 4px;

	> div {
		width: 1px;
		margin-left: -1px;
		height: 100%;
		background: hsl(0,0%,90%);
	}
}

.cui-list-view-tool-marker {
	position: absolute;
	background: hsl(106,0%,96%);
	opacity: 0.5;
}

// ListViewTree

.cui-list-view-grid {
	&.cui-list-view-tree-no-hierarchy {
		.cui-tree-node-handle {
			display: none;
		}
	}
	.cui-tree-node {
		flex-direction: row;
		flex: 1 1 auto;

		.cui-tree-node-handle,
		.cui-tree-node-spacer {
			width: 14px;
			flex: 0 0 auto;
		}
		.cui-tree-node-handle {
			text-align: center;
			> i {
				font-size: 16px;
				line-height: 20px;
			}
		}
		.cui-tree-node-content {
			flex: 1 1 auto;
		}
	}
}

// Form

.cui-form-tr {
	flex-direction: row;
}

.cui-form-table-has-not-left-column {
	> .cui-form-tr > .cui-form-td.cui-form-left {
		display: none;
	}
}

.cui-form-table-has-not-right-column {
	> .cui-form-tr > .cui-form-td.cui-form-right {
		display: none;
	}
}

.cui-form[cui-data-field-form-depth="0"] {
	> .cui-vertical-layout-center {
		> .cui-form-table {
			> .cui-form-tr:last-child {
				border-color: #ff44ee;
			}
		}
	}
}

.cui-form:not([cui-data-field-form-depth="0"]) {
	> .cui-vertical-layout-center {
		> .cui-form-table {
			> .cui-form-tr:last-child {
				border-style: none;
			}
		}
	}
}

.cui-data-field-hidden {
	display: none;
}

.cui-form-td {
	&.cui-form-left,
	&.cui-form-right {
		width: 100px;
	}
	&.cui-form-center {
		width: 200px;
	}
}

.cui-maximize-horizontal > .cui-vertical-layout-center > .cui-form-table {
	> tr {
		> .cui-form-td.cui-form-center {
			flex: 1 1 auto;
			width: 200px;
		}
	}
}


// Table
.cui-form-table,
.cui-demo-table {
	margin: $padding;
	
	& & {
		margin: 0;
	}
}

.cui-tr {
	flex-direction: row;
	@include padding-y(0.5);
}


// Options
.cui-options-form-table {
	.cui-form-tr {
		padding: 0;
	}
}

.cui-drag-drop-select-sortable,
.drag-drop-select-helper {
	.cui-form-td.cui-form-left {
		width: 10px;
		flex-direction: row;
	}
}

.cui-drag-handle-row {
	&:hover {
		opacity: 0.8;
	}

	flex: 1 1 auto;
	cursor: move;
	height: 12px;
	margin-top: 2px;
	width: 100%;
	align-self: center;

	background: linear-gradient(hsl(0,0%,50%) 1px, transparent 1px);
	background-size: 100% 3px;
}

// Drag and Drop

.drag-drop-select-helper {
	&.cui-tr {
		padding: 0;
	}
}

.cui-dragging {
	opacity: 0;
}

// DateTime
.cui-date-time {
	flex-direction: row;
}

.cui-buttonbar-group-date,
.cui-buttonbar-group-time { // DateTime Day:Month:Year Hour:Minute
	.cui-select {
		&:not(:last-child) .cui-button {
			border-right-width: 0;
		}

		&:last-child .cui-button {
			border-right-width: 1px;
			border-top-right-radius: $border-radius;
			border-bottom-right-radius: $border-radius;
			
			.cui-button-right {
				padding-right: 6px;
			}
		}

		&:not(:first-child) .cui-button {
			border-left-width: 0;
		}

		&:first-child .cui-button {
			border-top-right-radius: 0;
			border-bottom-right-radius: 0;
			
			&:before {
				display: none;
			}
		}

		&:last-child .cui-button {
			border-top-left-radius: 0;
			border-bottom-left-radius: 0;
		}

		&:not(:first-child):not(:last-child) .cui-button {
			border-radius: 0;
		}
		
		.cui-button-center {
			padding-left: 1px;
			text-align: right;
		}

		.cui-button-right {
			padding: 0 3px;
		}
	}
}

.cui-date-time-input-center {
	flex: 1 1 auto;
}

.cui-date-time-input-right {
	position: relative;
	
	.cui-button {
		border-left: none;
		border-radius: 0;
		
		&:active {
			@include button-simple-active;
		}
	}
}

.cui-date-time-month-header {
	border-bottom: 1px solid hsl(0,0%,75%);
}

.cui-date-time-day {
	border-radius: $border-radius;
}

.cui-date-time-same-month {
	cursor: pointer;
}

.cui-date-time-previous-month,
.cui-date-time-next-month,
.cui-date-time-week {
	color: hsl(0,0%,79%);
}

.cui-date-time-selected {
	background: $highlight-color !important;
	color: $on-highlight-color !important;
}

.cui-date-time-now {
	background: hsl(0,0%,92%);
}

.cui-date-time-footer {
	.cui-buttonbar > *:not(:last-child) {
		margin-right: 0;
	}

	.cui-label {
		cursor: default;
	}

	> .cui-horizontal-layout-left {
		flex: 1 0 auto;
		margin-right: $gap;
		
		.cui-label { // June, September
			flex: 1 1 auto;
    	justify-content: center;
			padding: 0;
		}
	}

	> .cui-horizontal-layout-center {
		flex-grow: 0 !important;
	}
}

.cui-date-time-header-year {
	
}


// DateTimeDate

.cui-date-time-date {
	@include flex-table();
	@include margin();
	flex-grow: 1;
	font-size: 12px;
	
	.cui-tr {
		padding: 0;
	}

	.cui-td,
	.cui-th {
		width: calc(100% / 8 - 1px); // 8 columns
		text-align: right;
		cursor: default;
		justify-content: center;
		padding: 0 7px;
		line-height: 21px;
		margin: 0 1px 1px 0;
	}
}

// DateTime Popover

.cui-menu.cui-date-time-60-select {
	.cui-tmpl-item-list-body {
		box-sizing: content-box;
		width: 350px;
		flex-direction: row;
		flex-wrap: wrap;
		> * {
			box-sizing: border-box;
		}

		.cui-button {
			width: 35px;
			height: 30px;
			align-items: center;
			text-align: center;
		}
	}
}


.cui-date-time-popover {
	width: 270px;

	.cui-tmpl-date-time {
		@include padding();
		flex: 1 1 auto;

		.cui-date-time-header {
			display: none;
		}

		&[browser="time"] {
			.cui-date-time-calendar {
				margin-left: -100%;
			}
		}

		.cui-date-time-browser {
			.cui-date-time-calendar,
			.cui-date-time-clock {
				width: 100%;
			}

			.cui-date-time-calendar {
				transition: margin-left 0.5s ease-out;
			}
			flex-direction: row;
			// overflow: hidden; cuts off year-picker outline
			flex: 1 1 auto;
			.cui-number-input {
				input {
					width: 40px;
					text-align: center;
				}
			}
		}
	}
}

.cui-date-time-clock {
	display: none;
}


// MultiInput

.cui-multi-input .cui-multi-input-container {
    align-items: stretch;
	flex: 1 1 auto;

	> .cui-multi-input-input {
		flex-direction: row;
		> .cui-data-field-multi-input-center {
			flex: 1 1 auto;
		}
		> .cui-data-field-multi-input-right {
			flex: 0 0  auto;
			.cui-button {
				justify-content: center;
				width: 25px;
			}
		}
	}
}

.cui-multi-input-input {
	@include margin(0.25);
	position: relative;
	
	.cui-input,
	.cui-textarea {
		padding-right: 20px;
	}
}

.cui-data-field-multi-input-right {
	position: absolute;
	right: 0;
	top: 0;
}
	
.cui-multi-input-tag-button {
	color: hsl(0,0%,30%);
	font-size: 10px;
  line-height: 20px;
  cursor: pointer;
    
  .cui-button-center {
  	padding: 0 5px;
	}
}

// Drag & Drop

.cui-drag-drop-select-transparent {
	pointer-events: none !important;
	* {
		pointer-events: none !important;
	}
}



// Droppable

.cui-droppable {
	// marks an active droppable
	opacity: 0.5;
}

// Movable
.cui-drag-drop-select-movable {
	cursor: move;
}

// Resizable
.cui-drag-drop-select-resizable {
	position: relative;
}

.cui-resizable-handle {
	position: absolute;

	&.cui-resizable-handle-se {
		bottom: -8px;
		right: -8px;
		width: 16px;
		height: 16px;
		cursor: nwse-resize;
	}

	&.cui-resizable-handle-nw {
		top: -8px;
		left: -8px;
		width: 16px;
		height: 16px;
		cursor: nwse-resize;
	}

	&.cui-resizable-handle-sw {
		bottom: -8px;
		left: -8px;
		width: 16px;
		height: 16px;
		cursor: nesw-resize;
	}

	&.cui-resizable-handle-ne {
		right: -8px;
		top: -8px;
		width: 16px;
		height: 16px;
		cursor: nesw-resize;
	}

	&.cui-resizable-handle-s {
		left: 8px;
		right: 8px;
		bottom: -8px;
		height: 16px;
		cursor: ns-resize;
	}

	&.cui-resizable-handle-n {
		left: 8px;
		right: 8px;
		top: -8px;
		height: 16px;
		cursor: ns-resize;
	}

	&.cui-resizable-handle-e {
		right: -8px;
		top: 8px;
		bottom: 8px;
		width: 16px;
		cursor: ew-resize;
	}

	&.cui-resizable-handle-w {
		left: -8px;
		top: 8px;
		bottom: 8px;
		width: 16px;
		cursor: ew-resize;
	}
}


// Lasso
.cui-lasso-area {
	position: relative;
}

.cui-lasso {
	position: absolute;
	background-color: rgba(135, 198, 253, 0.35);
	display: block;
	// border: 2px dotted rgba(135, 198, 253, 0.8);
}

.cui-drag-drop-select-lasso-element-in-lasso {
	opacity: 0.8;
}




// Block

.cui-block {
	&.cui-block-level-1 {
		// border: 1px solid blue;
		> .cui-block-header {
			font-size: 15px;
		}
	}
	&.cui-block-level-2 {
		> .cui-block-header {
			font-size: 13px;
		}
	}
	> .cui-block-header {
		font-weight: bold;
	}
}

.cui-block-header {
	@include padding();
	border-bottom: 1px solid hsl(0,0%,87%);
}

.cui-block-content {
	@include padding();
}

// StickyHeader

.cui-sticky-header {
	padding: 4px 10px;
	font-size: 11px;
	height: 22px;
	margin-bottom: 10px;
	
	&:not(:first-child) {
		margin-top: $padding*2;
		border-top: 1px solid hsl(0,0%,80%);
	}
}


.cui-sticky-header-control {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	
	.cui-tmpl-sticky-header {
		margin: 0;
		position: absolute;
		left: 0;
		right: 0;
		font-weight: 600;
		background: hsla(0,0%,100%,.75);
		border-top: none;
		box-shadow: 0 1px hsla(0,0%,50%,.5);
		margin-bottom: 1px;
	}
}

// ProgressMeter
.cui-tmpl-progress-meter {
	.cui-progress-meter-bar {
		height: 20px;
		position: relative;
		.cui-progress-meter-fill-background,
		.cui-progress-meter-fill,
		.cui-progress-meter-text {
			position: absolute;
			left: 0;
			right: 0;
			top: 0;
			bottom: 0;
		}
		.cui-progress-meter-fill-background {
			background-color: #7dc3ff;
		}
		.cui-progress-meter-fill {
			display: none;
			background-color: blue;
		}
		.cui-progress-meter-text {
			display: none;
			color: #ffffff;
			align-items: center;
			line-height: 20px;
		}
		.cui-progress-meter-icon {
			position: absolute;
			left: 0;
			top: 0;
			bottom: 0;
			right: 0;
			color: white;
			align-items: center;
		}

	}
	&[state="waiting"] {
		.cui-progress-meter-fill-background {
			// reddish
			background-color: #ff6054;
		}
	}

	&[state="percent"] {
		.cui-progress-meter-icon {
			display: none;
		}
		.cui-progress-meter-text {
			display: flex;
		}
		.cui-progress-meter-fill {
			display: flex;
		}
	}
}

// DigiDisplay

.cui-digi-display {
	// border: 1px solid black;
	align-self: flex-start;
	flex-direction: row;

	> div {
		vertical-align: bottom;
		height: 20px;
		// border-right: 1px solid #c0c0c0;
		&:last-child {
			border-right: 0;
		}
		text-align: center;
		overflow: hidden;
		padding: 1px;
		font-family: monospace;
		font-size: 16px;
		line-height: 18px;
	}

	.cui-digi-display-digit {
		transition: margin-top 0.3s ease;
		height: 18px;
	}

	.cui-digi-display-static {
		height: 20px;
	}

}




// CUI technical stuff
.cui-tmpl {
	// hide all templates
	display: none !important;
}

@keyframes nodeInserted {
	from { opacity: 0.99; }
	to { opacity: 1; }
}

